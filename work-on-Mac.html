<!DOCTYPE html> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="author" content="Poon" />
    <meta name="robots" content="index, follow"/>

    <meta property="og:title" content="Work on Mac!"/>
    <meta property="og:url" content="/work-on-Mac.html"/>
    <meta property="og:site_name" content="i.M.X.3"/>
    <meta property="og:type" content="article"/>

    <link rel="canonical" href="/work-on-Mac.html" />

    <title>Work on Mac! | i.M.X.3</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" />
    <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" />

    <link rel="stylesheet" type="text/css" href="/theme/css/main.css" />

    <script type="text/javascript">var switchTo5x=true;</script>
    <script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
    <script type="text/javascript">
        stLight.options({
            publisher: "7470bcd0-1833-4a2b-a25f-c4a233bdfced",
            doNotHash: false,
            doNotCopy: false,
            hashAddressBar: false
        });
    </script>
</head>

<body id="index">

<script>
(function(){
    var bp = document.createElement('script');
    bp.src = '//push.zhanzhang.baidu.com/push.js';
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
    <div class="row-fluid">
        <div class="span10 offset1">
            <header id="banner" >
                <h1>
                        <a href="/"> i.M.X.3 </a> 
<!-- /# 
 
                        <strong>
                            <span style="font-size:12px;vertical-align:bottom">Be a Coder,Lifehacker,Storyteller </span>
                        </strong>
 -->
                </h1>
                <nav class="navbar">
                    <div class="navbar-inner">
                        <ul class="nav">
                            <li ><a href="tags.html">Tags</a></li>
                            <li ><a href="about.html">About</a></li>
                        </ul>

<script>
  (function() {
    var cx = '005973619447881484970:jf4jwrpc3tg';
    var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
  })();
</script>
<div id="google-custom-search" class="nav">
    <gcse:search></gcse:search>
</div>
                    </div>
                </nav>
            </header><!-- /#banner -->
        </div>
    </div>

    <div class="row-fluid">
        <div class="span10 offset1">
            <div class="row-fluid">
<div class="span10 offset1">
  <section>
    <article>
      <header>
        <h1 class="entry-title">
          <a href="/work-on-Mac.html" rel="bookmark"
             title="Permalink to Work on Mac!">Work on Mac!</a></h1>
      </header>
      <div class="entry-content">
<footer class="post-info">
    <address class="vcard author">
        by <a class="url fn" href="/author/poon.html">Poon</a>
    </address>

    in <a href="/category/tech.html">Tech</a>

    on 2015-11-30

        |
        tags:         <a href="/tag/mac.html">Mac</a>
        <a href="/tag/osx.html">OSX</a>
        <a href="/tag/unix.html">Unix</a>


        |
        <a href="/work-on-Mac.html#disqus_thread">comments</a>

    
</footer><!-- /.post-info -->
        <div class="sharethis-top">
          <span class='st_fblike_hcount' displayText='Facebook Like'></span>
          <span class='st_plusone_hcount' displayText='Google +1'></span>
          <span class='st_twitter_hcount' displayText='Tweet'></span>
          <span class='st_email_hcount' displayText='Email'></span>
        </div>

        <nav class="toc">
        <div class="toc">
<ul>
<li><a href="#1-ulimit-n-65000">1. ulimit -n 65000</a></li>
<li><a href="#2-db2">2. db2 安装</a><ul>
<li><a href="#db2-get-dbm-cfg">db2 get dbm cfg</a></li>
<li><a href="#db2licm-l">db2licm -l</a></li>
<li><a href="#_1">创建实例：</a></li>
<li><a href="#db2start-sql1042c-an-unexpected-system-error-occurred-sqlstate58004">问题： db2start SQL1042C An unexpected system error occurred. SQLSTATE=58004</a></li>
<li><a href="#sql1031n-the-database-directory-cannot-be-found-on-the-indicated-file-system">问题 ： SQL1031N  The database directory cannot be found on the indicated file system.</a></li>
</ul>
</li>
<li><a href="#1">1</a><ul>
<li><a href="#macdate">mac下如何用date 做日期计算和调整 ， 例如，计算昨日。</a></li>
<li><a href="#mac">mac 上添加用户组</a></li>
</ul>
</li>
</ul>
</div>
        </nav>

        <p>Mac 是darwin unix 内核，很多东西跟linux不同。所以，还是单独把Mac拿出来说说。</p>
<p>仅以此帖，记录在linux下的点点滴滴。</p>

<h2 id="1-ulimit-n-65000">1. ulimit -n 65000</h2>
<p>-bash: ulimit: open files: cannot modify limit: Invalid argument</p>
<p>这个异常跟mac 的版本有关。</p>
<p>格式:</p>
<pre><code>launchctl limit maxfiles softcnt hardcnt
</code></pre>
<p>修改soft：</p>
<pre><code>launchctl limit maxfiles 512 unlimited
</code></pre>
<p>修改hard:</p>
<pre><code>launchctl limit maxfiles unlimited unlimited
</code></pre>
<p>[1] 2015-11-26 09:41 init </p>
<p>关于db2安装中遇到的ulimit参数问题，先改 sysctl.conf , 然后重启！很多问题都能解决！sysctl.conf ! </p>
<h2 id="2-db2">2. db2 安装</h2>
<p>db2 的安装还是得用root 用户进行。否则会报错的。</p>
<h3 id="db2-get-dbm-cfg">db2 get dbm cfg</h3>
<h3 id="db2licm-l">db2licm -l</h3>
<p>Product name:                     "DB2 Express-C"
Expiry date:                      "02/23/2016 (Try &amp; Buy)"
Product identifier:               "db2expc"
Version information:              "10.1"
Max number of CPUs:               "2"
Max amount of memory (GB):        "4"
Enforcement policy:               "Soft Stop"</p>
<h3 id="_1">创建实例：</h3>
<p>/opt/IBM/db2/V10.1/instance/db2icrt</p>
<h3 id="db2start-sql1042c-an-unexpected-system-error-occurred-sqlstate58004">问题： db2start SQL1042C An unexpected system error occurred. SQLSTATE=58004</h3>
<p>解决：
Wills-MacBook-Pro:sqllib db2inst1$ sudo chown db2inst1 /Users/db2inst1/sqllib/adm/*
Wills-MacBook-Pro:sqllib db2inst1$ db2start
SQL1063N  DB2START processing was successful.</p>
<p>http://stackoverflow.com/questions/33138859/cannot-db2start-using-db2-express-in-mac</p>
<h3 id="sql1031n-the-database-directory-cannot-be-found-on-the-indicated-file-system">问题 ： SQL1031N  The database directory cannot be found on the indicated file system.</h3>
<p>Wills-MacBook-Pro:sqllib db2inst1$ db2 connect to db2inst1
SQL1031N  The database directory cannot be found on the indicated file system. </p>
<p>解决:
 Wills-MacBook-Pro:bin db2inst1$ db2sampl </p>
<p>Creating database "SAMPLE"...
  Connecting to database "SAMPLE"...
  Creating tables and data in schema "DB2INST1"...
  Creating tables with XML columns and XML data in schema "DB2INST1"...</p>
<p>'db2sampl' processing complete.</p>
<p>Wills-MacBook-Pro:bin db2inst1$ pwd
/Users/db2inst1/sqllib/bin
Wills-MacBook-Pro:bin db2inst1$ db2 connect to sample</p>
<p>Database Connection Information</p>
<p>Database server        = DB2/DARWIN 10.1.0
 SQL authorization ID   = DB2INST1
 Local database alias   = SAMPLE</p>
<p>Wills-MacBook-Pro:bin db2inst1$ db2 "select count(0) from syscat.tables"</p>
<h2 id="1">1</h2>
<pre><code>    467
</code></pre>
<p>1 record(s) selected.</p>
<h3 id="macdate">mac下如何用date 做日期计算和调整 ， 例如，计算昨日。</h3>
<p>ref: http://lists.apple.com/archives/macos-x-server/2005/Sep/msg00067.html</p>
<p>date -v +1d +"%Y%m%d"
date -v -1d +"%Y%m%d"</p>
<p>-v      Adjust (i.e., take the current date and display the result of the adjustment; not actually set the date) the second, minute, hour, month day, week
             day, month or year according to val.  If val is preceded with a plus or minus sign, the date is adjusted forwards or backwards according to the
             remaining string, otherwise the relevant part of the date is set.  The date can be adjusted as many times as required using these flags.  Flags are
             processed in the order given.</p>
<h3 id="mac">mac 上添加用户组</h3>
<p>mac上不能像linux那样，用groupadd来添加用户中。网上有两种方法：</p>
<ol>
<li>
<p>通过 system preferences . </p>
</li>
<li>
<p>使用mac特有命令</p>
</li>
</ol>

        <div class="sharethis-bottom">
          <span class='st_fblike_hcount' displayText='Facebook Like'></span>
          <span class='st_plusone_hcount' displayText='Google +1'></span>
          <span class='st_twitter_hcount' displayText='Tweet'></span>
          <span class='st_email_hcount' displayText='Email'></span>
        </div>
      </div><!-- /.entry-content -->
      <div class="comments">
        <h2>Comments</h2>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
          var disqus_identifier = "work-on-Mac.html";
          (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//gitwillpoonimx3.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        </script>
      </div>

    </article>
  </section>
</div>
            </div>
        </div>
    </div>

    <footer id="site-footer">
        <div class="row-fluid">
            <div class="span10 offset1">
                <address>
                    <p>
                        This blog is proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                    </p>
                    <p>
                        <a href="http://github.com/jsliang/pelican-fresh/">Fresh</a> is a responsive theme designed by <a href="http://jsliang.com/">jsliang</a> and <a href="https://github.com/jsliang/pelican-fresh/graphs/contributors">contributors</a>.
                        Special thanks to <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a> and <a href="http://getbootstrap.com/">Twitter Bootstrap</a>.
                    </p>
                </address>
            </div>
        </div>
    </footer>

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-69868761-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
<script type="text/javascript">
    var disqus_shortname = 'gitwillpoonimx3';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
    <script src="//code.jquery.com/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>
</body>
</html>